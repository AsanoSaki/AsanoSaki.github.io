{"version":3,"sources":["snow.js"],"names":["_window$kr","window","kr","notMobile","snowConf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","canvas","document","getElementById","ctx","getContext","flakeCount","mX","mY","flakes","width","innerWidth","height","innerHeight","snow","clearRect","minDist","i","flake","x","y","x2","y2","dist","Math","sqrt","xcomp","ycomp","deltaV","velX","velY","speed","cos","step","stepSize","fillStyle","color","opacity","reset","beginPath","arc","size","PI","fill","floor","random","addEventListener","e","clientX","clientY","push","stepsize","angle","init"],"mappings":"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","file":"../js/snow.min.js","sourcesContent":["// 移动端默认关闭\r\nwindow.kr?.notMobile && (()=>{\r\n    let snowConf = {};\r\n    //-------------------参数设置区 开始-------------------\r\n        snowConf.flakeCount = 100;\r\n        snowConf.minDist = 150;\r\n        snowConf.color = \"255, 255, 255\";\r\n        snowConf.size = 2;\r\n        snowConf.speed = 0.5;\r\n        snowConf.opacity = 0.2;\r\n        snowConf.stepsize = .5;\r\n    //-------------------参数设置区 结束-------------------\r\n    const requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function(callback){window.setTimeout(callback, 1000/60);};\r\n    window.requestAnimationFrame = requestAnimationFrame;\r\n    const canvas = document.getElementById(\"snow\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const flakeCount = snowConf.flakeCount;\r\n    let mX = -100, mY = -100;\r\n    let flakes = [];\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    const snow = ()=>{\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        const minDist = snowConf.minDist;\r\n        for (let i = 0; i < flakeCount; i++){\r\n            let flake = flakes[i];\r\n            const x = mX, y = mY;\r\n            const x2 = flake.x, y2 = flake.y;\r\n            const dist = Math.sqrt((x - x2)*(x - x2) + (y - y2)*(y - y2));\r\n            if (dist < minDist) {\r\n                const force  = minDist / (dist*dist);\r\n                const xcomp  = (x - x2) / dist;\r\n                const ycomp  = (y - y2) / dist;\r\n                const deltaV = force / 2;\r\n                flake.velX -= deltaV * xcomp;\r\n                flake.velY -= deltaV * ycomp;\r\n             } else {\r\n                flake.velX *= 0.98;\r\n                if (flake.velY < flake.speed && (flake.speed - flake.velY > .01)) {\r\n                    flake.velY += (flake.speed - flake.velY) * .01;\r\n                }\r\n                flake.velX += Math.cos(flake.step += .05) * flake.stepSize;\r\n            }\r\n            ctx.fillStyle = \"rgba(\" + snowConf.color + \", \" + flake.opacity + \")\";\r\n            flake.y += flake.velY;\r\n            flake.x += flake.velX;\r\n            if(flake.y >= canvas.height || flake.y <= 0){\r\n                reset(flake);\r\n            }\r\n            if(flake.x >= canvas.width || flake.x <= 0){\r\n                reset(flake);\r\n            }\r\n            ctx.beginPath();\r\n            ctx.arc(flake.x, flake.y, flake.size, 0, Math.PI*2);\r\n            ctx.fill();\r\n        }\r\n        requestAnimationFrame(snow);\r\n    };\r\n    const reset = (flake)=>{\r\n        flake.x       = Math.floor(Math.random()*canvas.width);\r\n        flake.y       = 0;\r\n        flake.size    = (Math.random()*3)+2;\r\n        flake.speed   = (Math.random()*1)+0.5;\r\n        flake.velY    = flake.speed;\r\n        flake.velX    = 0;\r\n        flake.opacity = (Math.random()*0.5)+0.3;\r\n    };\r\n    const init = ()=>{\r\n        for(let i = 0; i < flakeCount; i++){\r\n            const x       = Math.floor(Math.random()*canvas.width);\r\n            const y       = Math.floor(Math.random()*canvas.height);\r\n            const size    = (Math.random()*3) + snowConf.size;\r\n            const speed   = (Math.random()*1) + snowConf.speed;\r\n            const opacity = (Math.random()*0.5) + snowConf.opacity;\r\n            flakes.push({\r\n                speed: speed,\r\n                velX: 0, velY: speed,\r\n                x: x, y: y,\r\n                size: size,\r\n                stepSize: (Math.random()) / 30 * snowConf.stepsize,\r\n                step: 0,\r\n                angle: 180,\r\n                opacity: opacity\r\n            });\r\n        }\r\n        snow();\r\n    };\r\n    document.addEventListener(\"mousemove\", (e)=>{mX = e.clientX, mY = e.clientY});\r\n    window.addEventListener(\"resize\",()=>{canvas.width = window.innerWidth; canvas.height = window.innerHeight;});\r\n    init();\r\n})();"]}